<!DOCTYPE html>
<html>
<head>
    <title>Weld Detection Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        body { margin: 0; font-family: Arial; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
            max-width: 300px;
        }
        #legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
        }
        #controls {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
        }
        .control-item {
            margin: 5px 0;
        }
        .control-item label {
            margin-left: 5px;
            cursor: pointer;
        }
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        .color-box {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border: 1px solid white;
        }
        canvas { display: block; }
    </style>
</head>
<body>
    <div id="info">
        <h3>Detected Corner Welds</h3>
        <div id="weldList"></div>
    </div>

    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="color-box" style="background-color: #ff0000;"></div>
            <span>Red Line = Detected Corner Weld</span>
        </div>
        <div class="legend-item">
            <div class="color-box" style="background-color: #808080;"></div>
            <span>Gray Line = Non-Weld Edge</span>
        </div>
        <div class="legend-item">
            <div class="color-box" style="background-color: #ffff00;"></div>
            <span>Yellow Sphere = Weld Midpoint</span>
        </div>
        <div class="legend-item">
            <div class="color-box" style="background-color: #ffffff;"></div>
            <span>White Sphere = Non-Weld Midpoint</span>
        </div>
        <div class="legend-item">
            <div class="color-box" style="background: linear-gradient(90deg, red 33%, green 33%, green 66%, blue 66%);"></div>
            <span>XYZ Axes = World Coordinates</span>
        </div>
        <div style="margin-top: 10px; font-size: 12px;">
            <div>X-Axis (Red) = Horizontal</div>
            <div>Y-Axis (Green) = Vertical</div>
            <div>Z-Axis (Blue) = Depth</div>
        </div>
    </div>

    <div id="controls">
        <h4>View Controls</h4>
        <div class="control-item">
            <input type="checkbox" id="toggleGrid" checked>
            <label for="toggleGrid">Show Grid</label>
        </div>
        <div class="control-item">
            <input type="checkbox" id="toggleAxes" checked>
            <label for="toggleAxes">Show XYZ Axes</label>
        </div>
        <div class="control-item">
            <input type="checkbox" id="toggleWelds" checked>
            <label for="toggleWelds">Show Weld Lines (Red)</label>
        </div>
        <div class="control-item">
            <input type="checkbox" id="toggleNonWelds" checked>
            <label for="toggleNonWelds">Show Non-Weld Edges (Gray)</label>
        </div>
        <div class="control-item">
            <input type="checkbox" id="toggleWeldSpheres" checked>
            <label for="toggleWeldSpheres">Show Weld Markers</label>
        </div>
        <div class="control-item">
            <input type="checkbox" id="toggleNonWeldSpheres" checked>
            <label for="toggleNonWeldSpheres">Show Non-Weld Markers</label>
        </div>
        <hr style="border-color: #666;">
        <div style="font-size: 12px; margin-top: 10px;">
            <div><b>Mouse Controls:</b></div>
            <div>Left Button: Rotate</div>
            <div>Scroll: Zoom</div>
            <div>Right Button: Pan</div>
        </div>
    </div>

    <script>
        // Three.js scene setup
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x222222);

        const camera = new THREE.PerspectiveCamera(
            75, window.innerWidth / window.innerHeight, 0.1, 10000
        );
        camera.position.set(500, 500, 500);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0x404040);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set(1, 1, 1);
        scene.add(directionalLight);

        // Grid helper
        const gridHelper = new THREE.GridHelper(1000, 20);
        scene.add(gridHelper);

        // Axes helper
        const axesHelper = new THREE.AxesHelper(100);
        scene.add(axesHelper);

        const weldData = [
        {start: [-5.77201e-15, 25, 5], end: [-5.77629e-15, 25, 1.93274e-18], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 1, edgeType: 0},
        {start: [2.71467e-15, -25, -1.93274e-18], end: [-5.77629e-15, 25, 1.93274e-18], length: 78.5398, confidence: 0, angle: 0, isWeld: false, edgeId: 2, edgeType: 1, curvePoints: [[2.71467e-15, -25, -1.93274e-18], [-3.91086, -24.6922, 1.43612e-18], [-7.72542, -23.7764, 4.76962e-18], [-11.3498, -22.2752, 7.98567e-18], [-14.6946, -20.2254, 1.10051e-17], [-17.6777, -17.6777, 1.37535e-17], [-20.2254, -14.6946, 1.61633e-17], [-22.2752, -11.3498, 1.81751e-17], [-23.7764, -7.72542, 1.97394e-17], [-24.6922, -3.91086, 2.08176e-17], [-25, -4.24548e-15, 2.13832e-17], [-24.6922, 3.91086, 2.14223e-17], [-23.7764, 7.72542, 2.09339e-17], [-22.2752, 11.3498, 1.993e-17], [-20.2254, 14.6946, 1.84354e-17], [-17.6777, 17.6777, 1.64868e-17], [-14.6946, 20.2254, 1.41323e-17], [-11.3498, 22.2752, 1.14298e-17], [-7.72542, 23.7764, 8.44591e-18], [-3.91086, 24.6922, 5.25401e-18], [-5.77629e-15, 25, 1.93274e-18]]},
        {start: [2.71895e-15, -25, 5], end: [2.71467e-15, -25, -1.93274e-18], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 3, edgeType: 0},
        {start: [2.71895e-15, -25, 5], end: [-5.77201e-15, 25, 5], length: 78.5398, confidence: 0, angle: 0, isWeld: false, edgeId: 4, edgeType: 1, curvePoints: [[2.71895e-15, -25, 5], [-3.91086, -24.6922, 5], [-7.72542, -23.7764, 5], [-11.3498, -22.2752, 5], [-14.6946, -20.2254, 5], [-17.6777, -17.6777, 5], [-20.2254, -14.6946, 5], [-22.2752, -11.3498, 5], [-23.7764, -7.72542, 5], [-24.6922, -3.91086, 5], [-25, -4.24587e-15, 5], [-24.6922, 3.91086, 5], [-23.7764, 7.72542, 5], [-22.2752, 11.3498, 5], [-20.2254, 14.6946, 5], [-17.6777, 17.6777, 5], [-14.6946, 20.2254, 5], [-11.3498, 22.2752, 5], [-7.72542, 23.7764, 5], [-3.91086, 24.6922, 5], [-5.77201e-15, 25, 5]]},
        {start: [-90.4002, -327.955, 5], end: [-96.2998, 328, 5], length: 655.982, confidence: 0, angle: 90, isWeld: true, edgeId: 5, edgeType: 0},
        {start: [-95.4, -328, 5], end: [-90.4002, -327.955, 5], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 6, edgeType: 0},
        {start: [-95.4, -328, 5], end: [102, -328, 5], length: 197.4, confidence: 0, angle: 0, isWeld: false, edgeId: 7, edgeType: 0},
        {start: [97.0001, -327.972, 5], end: [102, -328, 5], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 8, edgeType: 0},
        {start: [100.7, 328, 5], end: [97.0001, -327.972, 5], length: 655.982, confidence: 0, angle: 90, isWeld: true, edgeId: 9, edgeType: 0},
        {start: [100.7, 328, 5], end: [-96.2998, 328, 5], length: 197, confidence: 0, angle: 0, isWeld: false, edgeId: 10, edgeType: 0},
        {start: [4.9864e-15, -25, 5], end: [8.74191e-15, 25, 5], length: 78.5398, confidence: 0, angle: 0, isWeld: false, edgeId: 11, edgeType: 1, curvePoints: [[4.9864e-15, -25, 5], [3.91086, -24.6922, 5], [7.72542, -23.7764, 5], [11.3498, -22.2752, 5], [14.6946, -20.2254, 5], [17.6777, -17.6777, 5], [20.2254, -14.6946, 5], [22.2752, -11.3498, 5], [23.7764, -7.72542, 5], [24.6922, -3.91086, 5], [25, -7.20721e-15, 5], [24.6922, 3.91086, 5], [23.7764, 7.72542, 5], [22.2752, 11.3498, 5], [20.2254, 14.6946, 5], [17.6777, 17.6777, 5], [14.6946, 20.2254, 5], [11.3498, 22.2752, 5], [7.72542, 23.7764, 5], [3.91086, 24.6922, 5], [8.74191e-15, 25, 5]]},
        {start: [3.46945e-16, 25, 1.93274e-18], end: [2.71467e-15, -25, -1.93274e-18], length: 78.5398, confidence: 0, angle: 0, isWeld: false, edgeId: 12, edgeType: 1, curvePoints: [[3.46945e-16, 25, 1.93274e-18], [3.91086, 24.6922, -1.43612e-18], [7.72542, 23.7764, -4.76962e-18], [11.3498, 22.2752, -7.98567e-18], [14.6946, 20.2254, -1.10051e-17], [17.6777, 17.6777, -1.37535e-17], [20.2254, 14.6946, -1.61633e-17], [22.2752, 11.3498, -1.81751e-17], [23.7764, 7.72542, -1.97394e-17], [24.6922, 3.91086, -2.08176e-17], [25, 1.18386e-15, -2.13832e-17], [24.6922, -3.91086, -2.14223e-17], [23.7764, -7.72542, -2.09339e-17], [22.2752, -11.3498, -1.993e-17], [20.2254, -14.6946, -1.84354e-17], [17.6777, -17.6777, -1.64868e-17], [14.6946, -20.2254, -1.41323e-17], [11.3498, -22.2752, -1.14298e-17], [7.72542, -23.7764, -8.44591e-18], [3.91086, -24.6922, -5.25401e-18], [2.71467e-15, -25, -1.93274e-18]]},
        {start: [-166.7, 328, 1.67941e-16], end: [-166.7, -328, 1.17225e-16], length: 656, confidence: 0, angle: 0, isWeld: false, edgeId: 13, edgeType: 0},
        {start: [166.7, 328, -1.17225e-16], end: [-166.7, 328, 1.67941e-16], length: 333.4, confidence: 0, angle: 0, isWeld: false, edgeId: 14, edgeType: 0},
        {start: [166.7, -328, -1.67941e-16], end: [166.7, 328, -1.17225e-16], length: 656, confidence: 0, angle: 0, isWeld: false, edgeId: 15, edgeType: 0},
        {start: [-166.7, -328, 1.17225e-16], end: [166.7, -328, -1.67941e-16], length: 333.4, confidence: 0, angle: 0, isWeld: false, edgeId: 16, edgeType: 0},
        {start: [-96.3002, 328.045, 78], end: [-96.3002, 328.045, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 17, edgeType: 0},
        {start: [-96.3002, 328.045, 78], end: [-96.1716, 313.746, 92], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 18, edgeType: 0},
        {start: [-90.5288, -313.656, 92], end: [-96.1716, 313.746, 92], length: 627.427, confidence: 0, angle: 0, isWeld: false, edgeId: 19, edgeType: 0},
        {start: [-90.5288, -313.656, 92], end: [-90.4002, -327.955, 78], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 20, edgeType: 0},
        {start: [-90.4002, -327.955, 78], end: [-90.4002, -327.955, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 21, edgeType: 0},
        {start: [-90.4002, -327.955, 78], end: [-95.4, -328, 78], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 22, edgeType: 0},
        {start: [-95.4, -328, 78], end: [-95.4, -328, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 23, edgeType: 0},
        {start: [166.7, -328, 5], end: [166.7, -328, -1.67941e-16], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 24, edgeType: 0},
        {start: [102, -328, 5], end: [166.7, -328, 5], length: 64.7, confidence: 0, angle: 0, isWeld: false, edgeId: 25, edgeType: 0},
        {start: [-166.7, -328, 5], end: [-95.4, -328, 5], length: 71.3, confidence: 0, angle: 0, isWeld: false, edgeId: 26, edgeType: 0},
        {start: [-166.7, -328, 5], end: [-166.7, -328, 1.17225e-16], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 27, edgeType: 0},
        {start: [102, -328, 78], end: [102, -328, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 28, edgeType: 0},
        {start: [102, -328, 78], end: [97.0001, -327.972, 78], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 29, edgeType: 0},
        {start: [97.0001, -327.972, 78], end: [97.0001, -327.972, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 30, edgeType: 0},
        {start: [100.619, 313.728, 92], end: [97.0807, -313.672, 92], length: 627.41, confidence: 0, angle: 0, isWeld: false, edgeId: 31, edgeType: 0},
        {start: [100.619, 313.728, 92], end: [100.7, 328.028, 78], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 32, edgeType: 0},
        {start: [100.7, 328.028, 78], end: [100.7, 328.028, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 33, edgeType: 0},
        {start: [97.0001, -327.972, 78], end: [97.0807, -313.672, 92], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 34, edgeType: 0},
        {start: [-166.7, 328, 5], end: [-166.7, 328, 1.67941e-16], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 35, edgeType: 0},
        {start: [-101.3, 328, 5], end: [-166.7, 328, 5], length: 65.4, confidence: 0, angle: 0, isWeld: false, edgeId: 36, edgeType: 0},
        {start: [-96.2998, 328, 5], end: [-101.3, 328, 5], length: 5.0002, confidence: 0, angle: 0, isWeld: false, edgeId: 37, edgeType: 0},
        {start: [105.7, 328, 5], end: [100.7, 328, 5], length: 5.00008, confidence: 0, angle: 0, isWeld: false, edgeId: 38, edgeType: 0},
        {start: [166.7, 328, 5], end: [105.7, 328, 5], length: 61, confidence: 0, angle: 0, isWeld: false, edgeId: 39, edgeType: 0},
        {start: [166.7, 328, 5], end: [166.7, 328, -1.17225e-16], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 40, edgeType: 0},
        {start: [-166.7, 328, 5], end: [-166.7, -328, 5], length: 656, confidence: 0, angle: 0, isWeld: false, edgeId: 41, edgeType: 0},
        {start: [166.7, -328, 5], end: [166.7, 328, 5], length: 656, confidence: 0, angle: 0, isWeld: false, edgeId: 42, edgeType: 0},
        {start: [-101.3, 328, 78], end: [-101.3, 328, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 43, edgeType: 0},
        {start: [-101.3, 328, 78], end: [-96.3002, 328.045, 78], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 44, edgeType: 0},
        {start: [-96.3002, 328.045, 5], end: [-101.3, 328, 5], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 45, edgeType: 0},
        {start: [-101.171, 313.701, 92], end: [-101.3, 328, 78], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 46, edgeType: 0},
        {start: [-96.1716, 313.746, 92], end: [-101.171, 313.701, 92], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 47, edgeType: 0},
        {start: [-101.171, 313.701, 92], end: [-95.5286, -313.701, 92], length: 627.427, confidence: 0, angle: 0, isWeld: false, edgeId: 48, edgeType: 0},
        {start: [-95.5286, -313.701, 92], end: [-90.5288, -313.656, 92], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 49, edgeType: 0},
        {start: [-95.4, -328, 78], end: [-95.5286, -313.701, 92], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 50, edgeType: 0},
        {start: [-101.3, 328, 5], end: [-95.4, -328, 5], length: 656.027, confidence: 0, angle: 90, isWeld: true, edgeId: 51, edgeType: 0},
        {start: [102, -328, 5], end: [105.7, 328, 5], length: 656.01, confidence: 0, angle: 90, isWeld: true, edgeId: 52, edgeType: 0},
        {start: [105.7, 328, 78], end: [105.7, 328, 5], length: 73, confidence: 0, angle: 0, isWeld: false, edgeId: 53, edgeType: 0},
        {start: [105.7, 328, 78], end: [105.619, 313.7, 92], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 54, edgeType: 0},
        {start: [102.081, -313.7, 92], end: [105.619, 313.7, 92], length: 627.41, confidence: 0, angle: 0, isWeld: false, edgeId: 55, edgeType: 0},
        {start: [102.081, -313.7, 92], end: [102, -328, 78], length: 20.0122, confidence: 0, angle: 0, isWeld: false, edgeId: 56, edgeType: 0},
        {start: [97.0807, -313.672, 92], end: [102.081, -313.7, 92], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 57, edgeType: 0},
        {start: [105.619, 313.7, 92], end: [100.619, 313.728, 92], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 58, edgeType: 0},
        {start: [100.7, 328.028, 78], end: [105.7, 328, 78], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 59, edgeType: 0},
        {start: [105.7, 328, 5], end: [100.7, 328.028, 5], length: 5, confidence: 0, angle: 0, isWeld: false, edgeId: 60, edgeType: 0}
    ];

        // Groups for organizing objects
        const weldLines = new THREE.Group();
        const weldSpheres = new THREE.Group();
        const nonWeldLines = new THREE.Group();
        const nonWeldSpheres = new THREE.Group();
        scene.add(weldLines);
        scene.add(weldSpheres);
        scene.add(nonWeldLines);
        scene.add(nonWeldSpheres);

        // Function to add edge to scene
        function addEdge(edge, index) {
            const points = [];

            // Check if it's a curve with discretized points
            if (edge.curvePoints && edge.curvePoints.length > 0) {
                // Use the discretized curve points
                edge.curvePoints.forEach(pt => {
                    points.push(new THREE.Vector3(...pt));
                });
            } else {
                // Straight line - use start and end points
                points.push(new THREE.Vector3(...edge.start));
                points.push(new THREE.Vector3(...edge.end));
            }

            const geometry = new THREE.BufferGeometry().setFromPoints(points);

            // Different colors for welds vs non-welds
            const isWeld = edge.isWeld;
            const material = new THREE.LineBasicMaterial({
                color: isWeld ? 0xff0000 : 0x808080,  // Red for welds, gray for non-welds
                linewidth: isWeld ? 5 : 2
            });

            const line = new THREE.Line(geometry, material);
            if (isWeld) {
                weldLines.add(line);
            } else {
                nonWeldLines.add(line);
            }

            // Add sphere at midpoint
            const midpoint = new THREE.Vector3(
                (edge.start[0] + edge.end[0]) / 2,
                (edge.start[1] + edge.end[1]) / 2,
                (edge.start[2] + edge.end[2]) / 2
            );

            const sphereGeometry = new THREE.SphereGeometry(isWeld ? 10 : 5, 16, 16);
            const sphereMaterial = new THREE.MeshBasicMaterial({
                color: isWeld ? 0xffff00 : 0xffffff  // Yellow for welds, white for non-welds
            });
            const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
            sphere.position.copy(midpoint);

            if (isWeld) {
                weldSpheres.add(sphere);
            } else {
                nonWeldSpheres.add(sphere);
            }

            // Update info panel - only for detected welds
            if (isWeld) {
                const weldInfo = document.getElementById('weldList');
                weldInfo.innerHTML += `
                    <div>
                        Edge ${edge.edgeId}: L=${edge.length.toFixed(1)}mm,
                        Angle=${edge.angle.toFixed(0)}°,
                        Conf=${edge.confidence.toFixed(2)}<br>
                        Pos: [${midpoint.x.toFixed(0)}, ${midpoint.y.toFixed(0)}, ${midpoint.z.toFixed(0)}]
                    </div>
                `;
            }
        }

        // Add all edges
        let weldCount = 0;
        let totalCount = 0;
        weldData.forEach((edge, index) => {
            addEdge(edge, index);
            totalCount++;
            if (edge.isWeld) weldCount++;
        });

        // Update header with counts
        document.getElementById('info').innerHTML = `
            <h3>Edge Analysis Results</h3>
            <p>Detected Welds: ${weldCount} / ${totalCount} edges</p>
            <div id="weldList"></div>
        `;

        // Re-populate weld list
        weldData.forEach((edge, index) => {
            if (edge.isWeld) {
                const midpoint = {
                    x: (edge.start[0] + edge.end[0]) / 2,
                    y: (edge.start[1] + edge.end[1]) / 2,
                    z: (edge.start[2] + edge.end[2]) / 2
                };
                const weldInfo = document.getElementById('weldList');
                weldInfo.innerHTML += `
                    <div>
                        Edge ${edge.edgeId}: L=${edge.length.toFixed(1)}mm,
                        Angle=${edge.angle.toFixed(0)}°,
                        Conf=${edge.confidence.toFixed(2)}<br>
                        Pos: [${midpoint.x.toFixed(0)}, ${midpoint.y.toFixed(0)}, ${midpoint.z.toFixed(0)}]
                    </div>
                `;
            }
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Toggle controls
        document.getElementById('toggleGrid').addEventListener('change', (e) => {
            gridHelper.visible = e.target.checked;
        });

        document.getElementById('toggleAxes').addEventListener('change', (e) => {
            axesHelper.visible = e.target.checked;
        });

        document.getElementById('toggleWelds').addEventListener('change', (e) => {
            weldLines.visible = e.target.checked;
        });

        document.getElementById('toggleNonWelds').addEventListener('change', (e) => {
            nonWeldLines.visible = e.target.checked;
        });

        document.getElementById('toggleWeldSpheres').addEventListener('change', (e) => {
            weldSpheres.visible = e.target.checked;
        });

        document.getElementById('toggleNonWeldSpheres').addEventListener('change', (e) => {
            nonWeldSpheres.visible = e.target.checked;
        });
    </script>
</body>
</html>